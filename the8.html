<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width"/>
<title>Bootstrap 101 Template</title>
<style rel="stylesheet">
body { font: normal normal normal 100% Arial, serif;  margin:0;}
.switch {background-color: #eee; border: silver 2px solid; display: inline-block; position: relative; left:10px; top:10px;}
.switch .text {margin: 3px; display: block; color: red; float: left; font-family: monospace;}
.switch .text:first-child {color: green;}
.switch .button {background-color: gray; position: absolute; left: 0; top: 0; z-index: 3; display: none;}

#box {border: green 1px solid; position: absolute; top:100px; left: 100px; width: 50px; height: 50px;}
</style>
<script type="text/javascript" src="the8.js"></script>
<script type="text/javascript">

    var repeat = bee.getfn("repeat"),
        rangeIterator = bee.getfn("rangeIterator"),
        feed = bee.getfn("feed");

    function sw() {
        var swc = document.querySelector(".switch");
        var ar = [0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30].reverse();
        window.button = swc.querySelector(".button");
        button.style.height = swc.clientHeight + "px";
        button.style.width = Math.floor(swc.clientWidth / 2) + "px";
        button.style.display = "block";
        swc.onclick = function () {
            repeat(feed(function(v){ button.style.left = v + "px";}, ar.reverse()), 5, ar.length);
        };
        
        document.getElementById("numbers").onclick = countup;
    }
    window.onload = sw;

    function countup() {
    	var node = document.getElementById("numbers");
    	repeat(feed(function(v) {
    		node.innerText = v;
    	}, rangeIterator(0, 1000, 13)), 13, 79);
    }
    
    function boxtransform () {
    var node = document.getElementById("box");

    	repeat(
            feed(function(v) {
                node.style.width = v +"px";
            }, rangeIterator(50, 200, 2) ),
            10, 75
        ).then(function () {
            repeat(
                feed(function(v) {
                    node.style.height = v +"px";
                }, rangeIterator(50, 200, 2) ),
                10, 75);

            repeat(
                feed(function(v) {
                    node.style.width = v +"px";
                }, rangeIterator(200, 50, -2) ),
                10, 75
            ).repeat(
                feed(function(v) {
                    node.style.height = v +"px";
                }, rangeIterator(200, 50, -2) ),
                5, 75
            );
    	});
    }
</script>
</head>
<body>
<div id="container" class="clearfix">

<div class="switch">
    <div class="slid">
    <span class="text">&nbsp;ON</span>
    <span class="text">OFF</span>
    <span class="button"></span>
    </div>
</div>

<h1 id="numbers">0</h1>

<div id="box" onclick="boxtransform()"></div>
</div>
</body>
</html>
